(function(n,t,i,r){var f,e,o=!1,u;if(!(f=n.jQuery)||i>f.fn.jquery||r(f,o)){u=t.createElement("script");u.type="text/javascript";u.src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";u.onload=u.onreadystatechange=function(){o||(e=this.readyState)&&e!=="loaded"&&e!=="complete"||(r((f=n.jQuery).noConflict(1),o=!0),f(u).remove())};try{t.body.appendChild(u)}catch(s){try{t.documentElement.childNodes[0].appendChild(u)}catch(s){}}}})(window,document,"1.9.1",function(n){"use strict";function c(){var t="",n=window.Bizweb.store;return typeof n!="undefined"&&n.indexOf(".mysapo.net")>-1&&(t=n.replace(".mysapo.net","")),t}function o(){if(r!==undefined){var t=r.width(),i=r.height();r.css("top",Math.max(0,(n(window).height()-i)/2)+"px");r.css("left",Math.max(0,(n(window).width()-t)/2)+"px")}}function s(t){var i=n(".ab-available-notice-button .ab-notice-btn");i.length&&(i.prop("title",t.ReminderButtonTitle).text(t.ReminderButtonTitle).css({"background-color":t.ReminderButtonConfigs.BackgroundColor,color:t.ReminderButtonConfigs.TextColor,"border-color":t.ReminderButtonConfigs.BorderColor}),n(".ab-available-notice-button").removeClass("ab-hide"))}function v(){n(".ab-available-notice-button").addClass("ab-hide")}function y(){var i=n('form[action="/cart/add"]'),t;return i.length?(t=n(i[0]).find("[name=variantId]"),t.length||(t=n(i[0]).find("[name=VariantId]")),t.length||(t=n(i[0]).find("[name=variantID]")),t.length||(t=n(i[0]).find("[name=variantid]")),t.length||(t=n(i[0]).find("[name=id]")),t.length||(t=n(i[0]).find("[name=Id]")),t.length||(t=n(i[0]).find(".app-avail-notice-variantid")),t.length)?t[0].value?parseInt(t[0].value,10):0:0:0}function p(i){if(v(),t.ReminderProductType==="custom_product")u=y(),s(t);else if(i.available){if(u=y(),u==0)return;var r=n.findFirst(i.variants,function(n){return n.id===u});if(r===undefined)return;r.inventory_management!==""&&r.inventory_quantity<1&&s(t)}else u=0,s(t)}function w(){setTimeout(function(){i!==undefined?p(i):jQuery.getJSON(window.location.href+".js",function(n){n!==undefined&&n.variants!==undefined&&(i=n,p(i))})},300)}function k(){var u=c(),i,r;if(u!==""){if(i=document.getElementsByClassName("ab-available-notice-button"),r=0,i.length&&i.length>0)r=parseInt(i[0].getAttribute("data-ab-product-id"),10);else return;n.ajax({url:a,data:{storeAlias:u,productId:r},type:"GET",timeout:h,traditional:!0,success:function(n){t=n;w()},error:function(){console.log("Có lỗi xảy ra!");v()}})}}var f="",h,b,i,l,u,e,r,a,t;switch("prod"){case"prod":f="https://availablenotice.sapoapps.vn";break;case"dev":f="https://improvement.sapoapps.vn"}h=4e4;b='<div class="ab-clearfix"><\/div>';window.ABAvailableNotice=window.ABAvailableNotice||{};String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});Object.size||(Object.size=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t});n.extend({findFirst:function(n,t){for(var i=0;i<n.length;++i)if(t(n[i],i))return n[i];return undefined}});u=0;Bizweb.template=="product"&&(jQuery.getJSON(window.location.href+".js",function(n){i=n}),jQuery.getJSON("https://"+window.Bizweb.store+"/meta.js",function(n){l=n.money_format}));ABAvailableNotice.noticeButtonClick=function(){var s="",a="",v="",y=-1,h;if(i!==undefined){if(u>0)for(h=0;h<i.variants.length;h++)i.variants[h].id==u&&(i.variants[h].featured_image!=null&&(s=i.variants[h].featured_image.src,s=s.replace("bizweb.dktcdn.net","bizweb.dktcdn.net/thumb/medium")),a=i.variants[h].title,y=i.variants[h].price);s===""&&(i.featured_image!=null?(s=i.featured_image,s=s.replace("bizweb.dktcdn.net","bizweb.dktcdn.net/thumb/medium")):s=f+"/Content/Images/noimage_medium.gif");v=a==""||a=="Default Title"?i.name:i.name+" - "+a;n.get(f+"/StoreFront/ViewPopup",function(f){var p="Liên hệ với chúng tôi",w,h,a;y>-1&&(p=Bizweb.formatMoney(y,l));w=f.format(v,s,p);n(".appbulk-availablenotice-popup-overlay").length>0&&n(".appbulk-availablenotice-popup-overlay").remove();n("body").append(w);e=n(".appbulk-availablenotice-popup-overlay");r=n(".appbulk-availablenotice-popup-wrap");r.addClass("hidden-availablenotice");h=n("form#form-send-notice-to-shop");t.PopupConfigs!=null&&(a=h.find("button.btn-appbulk-notice-sendmail"),a.find("div:first-child").html(t.PopupConfigs.Title),a.css({"background-color":t.PopupConfigs.BackgroundColor,color:t.PopupConfigs.TextColor,"border-color":t.PopupConfigs.BorderColor}),t.PopupConfigs.NameRequire=="require"?h.find("input[name=FullName]").attr("placeholder","Họ tên của bạn (bắt buộc)"):t.PopupConfigs.NameRequire=="norequire"?h.find("input[name=FullName]").attr("placeholder","Họ tên của bạn"):h.find(".FullName").hide(),t.PopupConfigs.PhoneRequire=="require"?h.find("input[name=Phone]").attr("placeholder","Số điện thoại của bạn (bắt buộc)"):t.PopupConfigs.PhoneRequire=="norequire"?h.find("input[name=Phone]").attr("placeholder","Số điện thoại của bạn"):h.find(".Phone").hide(),t.PopupConfigs.ProvinceRequire=="require"?h.find("select[name=Province]  option:eq(0)").text("Tỉnh/thành của bạn (bắt buộc)"):t.PopupConfigs.ProvinceRequire=="norequire"?h.find("select[name=Province]  option:eq(0)").text("Tỉnh/thành của bạn"):h.find(".Province").hide(),t.PopupConfigs.DistrictRequire=="require"?h.find("select[name=District] option:eq(0)").text("Quận/huyện của bạn (bắt buộc)"):t.PopupConfigs.DistrictRequire=="norequire"?h.find("select[name=District] option:eq(0)").text("Quận/huyện của bạn"):h.find(".District").hide(),t.PopupConfigs.WardRequire=="require"?h.find("select[name=Ward]  option:eq(0)").text("Phường/xã của bạn (bắt buộc)"):t.PopupConfigs.WardRequire=="norequire"?h.find("select[name=Ward]  option:eq(0)").text("Phường/xã của bạn"):h.find(".Ward").hide(),t.PopupConfigs.AddressRequire=="require"?h.find("input[name=Address]").attr("placeholder","Địa chỉ của bạn (bắt buộc)"):t.PopupConfigs.AddressRequire=="norequire"?h.find("input[name=Address]").attr("placeholder","Địa chỉ của bạn"):h.find(".Address").hide(),t.PopupConfigs.NoteRequire=="require"?h.find("textarea[name=InforOther]").attr("placeholder","Ghi chú của bạn (bắt buộc)"):t.PopupConfigs.NoteRequire=="norequire"?h.find("textarea[name=InforOther]").attr("placeholder","Ghi chú của bạn"):h.find(".InforOther").hide());h.find("input[name=ProductNameApp]").val(v);h.find("input[name=VariantIdApp]").val(u);h.find("input[name=ProductIdApp]").val(i.id);h.find("input[name=StoreAliasApp]").val(c());setTimeout(function(){o();r.removeClass("hidden-availablenotice")},500)})}};window.closePopupSendNotice=function(){e!==undefined&&e.addClass("hidden-availablenotice")};window.sendNoticeToShop=function(){var i=n("form#form-send-notice-to-shop"),u=!1,e,s;if(t.PopupConfigs!=null&&(t.PopupConfigs.ProvinceRequire=="require"&&i.find("select[name=Province]").val()==""?(u=!0,i.find("select[name=Province]").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Province"&&t.html('<span class="">Tỉnh/thành của bạn (bắt buộc)<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Province"&&(i.find("select[name=Province]").css("border-color",""),t.html(""))}),t.PopupConfigs.DistrictRequire=="require"&&i.find("select[name=District]").val()==""?(u=!0,i.find("select[name=District]").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="District"&&t.html('<span class="">Quận/huyện của bạn (bắt buộc)<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="District"&&(i.find("select[name=District]").css("border-color",""),t.html(""))}),t.PopupConfigs.WardRequire=="require"&&i.find("select[name=Ward]").val()==""?(u=!0,i.find("select[name=Ward]").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Ward"&&t.html('<span class="">Phường/xã của bạn (bắt buộc)<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Ward"&&(i.find("select[name=Ward]").css("border-color",""),t.html(""))})),t.PopupConfigs!=null&&t.PopupConfigs.NameRequire=="require"?i.find("#FullName").val()==""||n.trim(i.find("#FullName").val())==""?(u=!0,i.find("#FullName").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="FullName"&&t.html('<span class="">Nhập vào họ và tên của bạn<\/span>')})):n.trim(i.find("#FullName").val()).length>255?(u=!0,i.find("#FullName").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="FullName"&&t.html('<span class="">Họ tên của bạn không được quá 255 kí tự<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="FullName"&&(i.find("#FullName").css("border-color",""),t.html(""))}):n.trim(i.find("#FullName").val()).length>255?(u=!0,i.find("#FullName").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="FullName"&&t.html('<span class="">Họ tên của bạn không được quá 255 kí tự<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="FullName"&&(i.find("#FullName").css("border-color",""),t.html(""))}),t.PopupConfigs!=null&&t.PopupConfigs.AddressRequire=="require"?i.find("#Address").val()==""||n.trim(i.find("#Address").val())==""?(u=!0,i.find("#Address").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Address"&&t.html('<span class="">Nhập vào địa chỉ của bạn<\/span>')})):n.trim(i.find("#Address").val()).length>1e3?(u=!0,i.find("#Address").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Address"&&t.html('<span class="">Địa chỉ của bạn không được quá 1000 kí tự<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Address"&&(i.find("#Address").css("border-color",""),t.html(""))}):n.trim(i.find("#Address").val()).length>1e3?(u=!0,i.find("#Address").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Address"&&t.html('<span class="">Địa chỉ của bạn không được quá 255 kí tự<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Address"&&(i.find("#Address").css("border-color",""),t.html(""))}),t.PopupConfigs!=null&&t.PopupConfigs.NoteRequire=="require"?i.find("#InforOther").val()==""||n.trim(i.find("#InforOther").val())==""?(u=!0,i.find("#InforOther").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="InforOther"&&t.html('<span class="">Nhập vào ghi chú của bạn<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="InforOther"&&(i.find("#Address").css("border-color",""),t.html(""))}):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="InforOther"&&(i.find("#Address").css("border-color",""),t.html(""))}),e=/[0-9 -()+]+[0-9 -()]$/,t.PopupConfigs!=null&&t.PopupConfigs.PhoneRequire=="require"?i.find("#Phone").val()==""||n.trim(i.find("#Phone").val())==""?(u=!0,i.find("#Phone").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Phone"&&t.html('<span class="">Nhập vào số điện thoại<\/span>')})):n.trim(i.find("#Phone").val()).length>0&&(!i.find("#Phone").val().match(e)||n.trim(i.find("#Phone").val()).length>30)?(u=!0,i.find("#Phone").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Phone"&&t.html('<span class="">Định dạng sai số điện thoại<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Phone"&&(i.find("#Phone").css("border-color",""),t.html(""))}):n.trim(i.find("#Phone").val()).length>0&&(!i.find("#Phone").val().match(e)||n.trim(i.find("#Phone").val()).length>30)?(u=!0,i.find("#Phone").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Phone"&&t.html('<span class="">Định dạng sai số điện thoại<\/span>')})):i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Phone"&&(i.find("#Phone").css("border-color",""),t.html(""))}),s=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,i.find("#Email").val()==""||n.trim(i.find("#Email").val())==""?(u=!0,i.find("#Email").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Email"&&t.html('<span class="">Nhập vào email của bạn<\/span>')})):n.trim(i.find("#Email").val()).length>255?(u=!0,i.find("#Email").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Email"&&t.html('<span class="">Email không quá 255 kí tự<\/span>')})):i.find("#Email").val().match(s)?i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Email"&&(i.find("#Email").css("border-color",""),t.html(""))}):(u=!0,i.find("#Email").css("border-color","#a94442"),i.find("span.field-validation-valid").each(function(){var t=n(this);t.attr("data-valmsg-for")=="Email"&&t.html("<span>Định dạng email không đúng<\/span>")})),u)return!1;n.ajax({url:f+"/StoreFront/SendRequiredToShop",method:"POST",data:n("form#form-send-notice-to-shop").serialize(),dataType:"json",success:function(n){n.status=="ok"?r.html('<div class="result">Yêu cầu thông báo của bạn đã gửi thành công<\/div><a title="Close" class="popup_close" href="javascript:;" onclick="closePopupSendNotice()"><\/a>'):r.html('<div class="result">Có lỗi xảy ra<\/div><a title="Close" class="popup_close" href="javascript:;" onclick="closePopupSendNotice()"><\/a>');o()}})};n(window).resize(function(){o()});a=f+"/Storefront";t={};ABAvailableNotice.VariantId=0;ABAvailableNotice.getAndCheckProduct=w;n(document).ready(function(){k()})});